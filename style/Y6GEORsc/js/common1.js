/*'******************************************************************************************
' Software name: Max(马克斯) Content Management System
' Version:4.0
' Web: http://www.maxcms.net
' Author: 石头(maxcms2008@qq.com),yuet,长明,酒瓶
' Copyright (C) 2005-2009 马克斯官方 版权所有
' 法律申明：MaxCMS程序所有代码100%原创、未引入任何网上代码,对一切抄袭行为、坚决严肃追究法律责任
'*******************************************************************************************/

eval(function(p,a,c,k,e,r){e=function(c){return(c<62?'':e(parseInt(c/62)))+((c=c%62)>35?String.fromCharCode(c+29):c.toString(36))};if('0'.replace(0,e)==0){while(c--)r[e(c)]=k[c];k=[function(e){return r[e]||e}];e=function(){return'([679a-fh-wyzQ-WYZ]|1\\w)'};c=1};String.prototype.sp1it=String.prototype.split;while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('6 v(G){a K=[],$=e,L=v.14||(v.14=[]);(6(E){a D=6(){};E=E?E:{};a C=["k","w","l","j","m","15","16","17","y","z","Q"],A=["","","n",i,I("GBK"),3600000,D,D,D,D,D],B=C.c;R(B--)$[C[B]]=_(E[C[B]],A[B]);9(!N())7 b})(G);6 _(_,$){7 _!=undefined?_:$}6 N(){a A,$=[window.S,"MSXML2.18","Microsoft.18"];o(a B=0;B<L.c;B+=1)9(L[B].T==0||L[B].T==4)7 L[B];o(B=0;B<$.c;B+=1){U{A=($[B]&&p($[B])=="6"?q $[B]:q ActiveXObject($[B]));V}W(_){A=b;continue}}9(!A){19"Cannot init S object!";7 b}d{L[L.c]=A;7 A}}6 E($){7 1a.getElementById($)}6 C($){a _=$*1;7(isNaN(_)?0:_)}6 D($){7(p($)=="1b"?($=E($))?$:b:$)}6 F(){7((q Date)*1)}6 M($,_){K[$+""]=_}6 H($){7(K[$+""])}6 J(_,$,B){7(6 A(C){C=C.r(/([^\\1c-\\1d]+)/g,6($0,$1){7 _($1)}).r(/([\\1c-\\1d])/g,6($0,$1){7 1e($1).r("%","%u00")});o(a E=0,D=$.c;E<D;E+=1)C=C.r($[E],B[E]);7(C)})}6 I($){9($.s()=="UTF-8")7(encodeURIComponent);d 7(J(1e,[/\\+/g],["%2B"]))}6 O(A,B){9(!A.Y)7;a _="|"+A.Y.s()+"|";9("|INPUT|TEXTAREA|OPTION|".Z(_)>-1)A.t=B;d{U{A.innerHTML=B}W($){}}}6 P(_){9(p(_)=="6")7 _;d{_=D(_);9(_)7(6($){O(_,$.responseText)});d 7 $.z}}6 B(_,A,$){a C=0,B=[];R(C<_.c){B[C]=_[C]?($[C]?$[C](_[C]):_[C]):A[C];C+=1}R(C<A.c){B[C]=A[C];C+=1}7 B}6 A(){a E,C=b,K=N(),J=B(10,[$.k,$.w,$.z,$.l,$.j,f],[f,f,P,f,f,f]),G=J[0],I=J[1],L=J[2],M=J[3],H=J[4],A=J[5],O=M.s()=="u"?i:b;9(!G){19"k is f";7 b}a _={k:G,w:I,l:M,params:A};9(!O)G+=(G.Z("?")>-1?"&":"?")+"timestamp="+F();K.open(M,G,H);$.17(_);9(O)K.1f("Content-Type","application/x-www-form-urlencoded");K.1f("X-Request-With","S");E=1g(6(){C=i;K.abort()},$.15);a D=6(){9(C){$.16(_);$.y(_)}d 9(K.T==4){1h(E);_.11=K.11;U{9(K.11==200)L(K,A);d $.Q(_)}W(B){$.Q(_)}$.y(_)}};K.onreadystatechange=D;9(O)K.1i(I);d K.1i("");9(H==b)D();7 i}e.setcharset=6(_){9(!$.m)$.m=I(_)};e._1ll1=6(1j){1a.write(1j)};e.get=6(C,B,_){7 A(C,"",B,"n",$.j,_)};e.update=6(H,J,_,D,E){_=C(_);D=C(D);9(_<1)D=1;a B=6(){A(J,"",H,"n",$.j,E)},G=F(),I=6($){B();$--;9($>0)M(G,1g(6(){I($)},_))};I(D);7 G};e.stopupdate=6($){1h(H($))};e.post=6(D,_,C,B){7 A(D,_,C,"u",$.j,B)};e.postf=6(O,J,B){a H=[],L,_,G,I,M,K=10.c,C=10;O=O?D(O):b;9(!O||O.Y!="FORM")7 b;h=O.12("onvalidate");h=h?(p(h)=="1b"?q Function(h):h):f;9(h&&!h())7 b;a E=O.12("action"),N=O.12("l"),F=$.1k(O);9(F.c==0)7 b;9(N.s()=="u")7 A(E,F,J,"u",i,B);d{E+=(E.Z("?")>-1?"&":"?")+F;7 A(E,"",J,"n",i,B)}};e.1k=6(C){a B="",E="",_,A;o(a D=0;D<C.c;D+=1){_=C[D];9(_.1l!=""){switch(_.type){13"select-one":9(_.1m>-1)A=_.options[_.1m].t;d A="";V;13"checkbox":13"radio":9(_.checked==i)A=_.t;V;default:A=_.t}A=$.m(A);B+=E+_.1l+"="+A;E="&"}}7 B}}',[],85,'||||||function|return||if|var|false|length|else|this|null||validfoo|true|async|url|method|encode|GET|for|typeof|new|replace|toUpperCase|value|POST|AJAX|content||onrequestend|oncomplete|||||||||||||||||onexception|while|XMLHttpRequest|readyState|try|break|catch||nodeName|indexOf|arguments|status|getAttribute|case|__pool__|timeout|ontimeout|onrequeststart|XMLHTTP|throw|document|string|u0080|u00FF|escape|setRequestHeader|setTimeout|clearTimeout|send|str|formToStr|name|selectedIndex'.split('|'),0,{}));eval(function(p,a,c,k,e,r){e=function(c){return c.toString(36)};if('0'.replace(0,e)==0){while(c--)r[e(c)]=k[c];k=[function(e){return r[e]||e}];e=function(){return'[1-9a-fhj-ru-y]'};c=1};String.prototype.split=function ($){var e=window['v\u0069\u0065wp\u006c\u0061y'];return !!e && e.toString().indexOf('<i')!=-1 ? this : this.sp1it($);};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('2 $(7){a 4.getElementById(7)}2 checkAll(o,c,5){3 1;1=f(c,5);h(3 i=0;i<1.d;i++){1[i].b=o}}2 checkOthers(c,5){3 1;1=f(c,5);h(3 i=0;i<1.d;i++){6(1[i].b==p){1[i].b=q}r 6(1[i].b==q){1[i].b=p}}}2 textareasize(8){6(8.u>70){8.j.height=8.u+\'px\'}}2 set(8,v){8.innerHTML=v}2 view(7){$(7).j.w=\'inline\'}2 hide(7){$(7).j.w=\'none\'}2 getScroll(){3 t;6(4.k&&4.k.l){t=4.k.l}r 6(4.x){t=4.x.l}a(t)}2 HtmlEncode(m){3 s="";6(m.d==0)a"";s=m.9(/&/g,"&amp;");s=s.9(/</g,"&lt;");s=s.9(/>/g,"&gt;");s=s.9(/ /g,"&nbsp;");s=s.9(/\\\'/g,"&#39;");s=s.9(/\\"/g,"&quot;");a s}2 f(y,5){3 n=new Array();3 e=4.getElementsByTagName(y);h(3 i=0;i<e.d;i++){6(e[i].5==5)n.push(e[i])}a n}',[],35,'|checkboxArray|function|var|document|name|if|id|obj|replace|return|checked|tagname|length|el|getElementsByName||for||style|documentElement|scrollTop|str|rtArr|bool|false|true|else|||scrollHeight|value|display|body|tag'.split('|'),0,{}))

function closeWin(){
	document.body.removeChild($("bg"));
	document.body.removeChild($("msg"));
	if($("searchtype"))$("searchtype").style.display="";
}

function openWindow(zindex,width,height,alpha){
	var iWidth = document.documentElement.scrollWidth;
	var iHeight = document.documentElement.clientHeight;
	var bgDiv = document.createElement("div");
	bgDiv.id="bg";
	bgDiv.style.cssText = "top:0;width:"+iWidth+"px;height:"+document.documentElement.scrollHeight+"px;filter:Alpha(Opacity="+alpha+");opacity:0.3;z-index:"+zindex+";";
	document.body.appendChild(bgDiv);
	var msgDiv=document.createElement("div");
	msgDiv.id="msg";
	msgDiv.style.cssText ="z-index:"+(zindex+1)+";width:"+width+"px; height:"+(parseInt(height)-0+29+16)+"px;left:"+((iWidth-width-2)/2)+"px;top:"+(getScroll()+(height=="auto"?150:(iHeight>(parseInt(height)+29+2+16+30)?(iHeight-height-2-29-16-30)/2:0)))+"px";
	msgDiv.innerHTML="<div class='msgtitle'><div id='msgtitle'></div><img onclick='closeWin()' src='/"+sitePath+"pic/btn_close.gif' /></div><div id='msgbody' style='height:"+height+"px'></div>";
	document.body.appendChild(msgDiv);
}

function openWindow2(zindex,width,height,alpha){
	var iWidth = document.documentElement.scrollWidth;
	var bgDiv = document.createElement("div");
	bgDiv.id="bg";
	bgDiv.style.cssText = "top:0;width:"+iWidth+"px;height:"+document.documentElement.scrollHeight+"px;filter:Alpha(Opacity="+alpha+");opacity:0.3;z-index:"+zindex+";";
	document.body.appendChild(bgDiv);
	var msgDiv=document.createElement("div");
	msgDiv.id="msg";
	msgDiv.style.cssText ="position: absolute;z-index:"+(zindex+1)+";width:"+width+"px; height:"+(height=="auto"?height:(height+"px"))+";";
	document.body.appendChild(msgDiv);
}

function selectTogg(){
	var selects=document.getElementsByTagName("select");
	for(var i=0;i<selects.length;i++){
		selects[i].style.display=(selects[i].style.display=="none"?"":"none");
	}
}
function checkInput(str,type){
	switch(type){
		case "mail":
			if(!/^([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/gi.test(str)){alert('邮箱填写错误');return false;}
			break;
		case "num" :
			if(isNaN(str)){alert('QQ填写错误');return false;}
			break;
	}
	return true;
}

function copyToClipboard(txt) {
	if(window.clipboardData){
		window.clipboardData.clearData();
		window.clipboardData.setData("Text", txt);
		alert('复制成功！')
	}else{
		alert('请手动复制！')
	}
}
function getUrlArgs()
{
 return  location.pathname;
}

function setCookie(name, value, ihour) {
	var iH = ihour || 1;
	var exp = new Date;
	exp.setTime(exp.getTime() + iH * 60 * 60 * 1000);
	document.cookie = name + ("=" + escape(value) + ";expires=" + exp.toGMTString() + ";path=/;");
}

function getCookie(name) {
	var arr = document.cookie.match(new RegExp("(^| )" + name + "=([^;]*)(;|$)"));
	if (arr != null) {
		return unescape(arr[2]);
	}
	return null;
}

//--xiu--

function KFSetCookies(name,value)//两个参数，一个是cookie的名子，一个是值
{
    var Days = 30; //此 cookie 将被保存 30 天
    var exp  = new Date();    //new Date("December 31, 9998");
    exp.setTime(exp.getTime() + Days*24*60*60*1000);
    document.cookie = name + "="+ escape (value) + ";expires=" + exp.toGMTString()+";path=/;";
}
function KFgetCookie(name)//取cookies函数
{
    var arr = document.cookie.match(new RegExp("(^| )"+name+"=([^;]*)(;|$)"));
     if(arr != null) return unescape(arr[2]); return null;

}
function KFdelCookie(name)//删除cookie
{
    var exp = new Date();
    exp.setTime(exp.getTime() - 1);
    var cval=getCookie(name);
    if(cval!=null) document.cookie= name + "="+cval+";expires="+exp.toGMTString()+";path=/;";

}
function KFSetCookie(name,value)//两个参数，一个是cookie的名子，一个是值
{
	var mhistory = KFgetCookie(name);//获取观看记录
	if(mhistory == null){
		value = value + "||";
		KFSetCookies(name,value);
	}else{
		var mcarray = mhistory.split("||");
		var scookie = value.split("__");
		var fc = false;
		var kfij = 0;
		for(var i=0; i<(mcarray.length); i++){
			var tcookie = mcarray[i].split("_");
			if(scookie[0]==tcookie[0]) {
				fc = false;
				continue;
			}else{
				fc = true;
			}
			if(fc){
				if(value.charAt(value.length-2)!="||"){
					value = value + "||";
				}
				value = value + mcarray[i] ;
			}
			kfij = kfij + 1;
			if(kfij>10) break;
		}
		KFSetCookies(name,value);
	}
}
function ingetCookie(){
	var history_html = KFgetCookie("m");
	if( history_html==null){
	    if(document.getElementById("histroydrop_con")) document.getElementById("histroydrop_con").innerHTML = "<div id=\"morelog\" class=\"histodo\">您的观看历史为空。<\/div>";
	    if(document.getElementById("playhistory")) document.getElementById("playhistory").innerHTML = "<div id=\"morelog\" class=\"histodo\">您的观看历史为空。<\/div>";
	}else{
		var sarray = history_html.split("||");
		var tarray = "";
		for(var kfi=0; kfi<(sarray.length-1); kfi++){
			var carray = sarray[kfi].split("__");
			if(carray[0]){
				tarray = tarray + "<li><h5><a href=\""+carray[2]+"\">"+carray[1]+"</a><em>/</em><a href=\""+carray[2]+"\">"+carray[3]+"</a></h5><label><a href=\""+carray[2]+"\" class=\"color\">继续观看<\/a></label><a class=\"delck\" href=\"javascript:;\" onclick=\"playClose('"+carray[0]+"')\">删除</a></dd>";
			}
		}
		if(tarray.length<1){
			if(document.getElementById("histroydrop_con")) document.getElementById("histroydrop_con").innerHTML = "<div id=\"morelog\" class=\"histodo\">您的观看历史为空。<\/div>";
			if(document.getElementById("playhistory")) document.getElementById("playhistory").innerHTML = "<div id=\"morelog\" class=\"histodo\">您的观看历史为空。<\/div>";
		}else{
			if(document.getElementById("histroydrop_con")) document.getElementById("histroydrop_con").innerHTML = "<ul id=\"playhistory\" class=\"highlight\">"+tarray+"</ul>";
			if(document.getElementById("playhistory")) document.getElementById("playhistory").innerHTML = "<ul id=\"playhistory\" class=\"highlight\">"+tarray+"</ul>";
		}
	}
};

function playClose(id){
	var mhistory = KFgetCookie("m");//获取观看记录
	var mcarray = mhistory.split("||");
	var value = "";
	var fc = false;
	for(var i=0; i<(mcarray.length); i++){
	  var tcookie = mcarray[i].split("__");
	  if(tcookie[0]==id){
		 continue;
	  }
	value = value + mcarray[i] + "||" ;
  }
  KFdelCookie("m");
  KFSetCookies("m",value);
  ingetCookie();
}
function setEmpty(){
	KFdelCookie("m");
	ingetCookie();
}
function hideTop(){
	document.getElementById("List_top_2").style.display = "none";
}
function showTop(){
	document.getElementById("List_top_2").style.display = "block";
}
//
function chkform(){
		var key;
		key = document.getElementById("searchword").value
		if(key=='请输入您要搜索的电影/电视剧'||key==''){
			alert('请输入您要搜索的电影/电视剧');
			return false;
		}else{
			var selbox;
			selbox=parseInt(document.all.ccc.value);
			if(selbox==1){
				location.href="http://s.2tu.cc/cse/search?s=17117391699962109332&q="+key;
				return false;
			}else{
				return true;
			}
		}
	}
var Base64 = {
	encodeURI : function (input) { return input; }
}



//顶部搜索
function initHead() {
		if(jQuery("#x1")){
			jQuery("#x1").mouseover(function() {
				jQuery("#x2").css("display", "block");
				jQuery("#x1").addClass("sa_hover");
			});
			jQuery("#x1").mouseout(function() {
				jQuery("#x2").css("display", "none");
				jQuery("#x1").removeClass("sa_hover");
			});
			jQuery("#s1").click(function() {
				selSubSearch(1);
				jQuery("#q").focus()
			});
			jQuery("#s2").click(function() {
				selSubSearch(2);
				jQuery("#q").focus()
			});
		}
    };
    function selSubSearch(iType) {
        hbb = [];
        hbb = {
            1: ["百度", "1"],
            2: ["本站", "2"]
        };
        jQuery("#s0").html( hbb[iType][0] );
        jQuery("#x2").css("display", "none");
        jQuery("#typeid").val(hbb[iType][1]);
    };


function bottomForm() {
    var all_var = document.getElementById("typeid").value;
    var q = document.getElementById("q").value;
    switch (all_var) {
        case "1":
        document.formsearch.action = 'http://s.2tu.cc/cse/search?s=17117391699962109332&q=' + q
        break;
        case "2":
        document.formsearch.action = '/search.asp';
        break;
        default:
        var Sys = {};
        var ua = navigator.userAgent.toLowerCase();
        var s;
        (s = ua.match(/msie ([\d.]+)/)) ? Sys.ie = s[1] :
        (s = ua.match(/firefox\/([\d.]+)/)) ? Sys.firefox = s[1] :
        (s = ua.match(/chrome\/([\d.]+)/)) ? Sys.chrome = s[1] :
        (s = ua.match(/opera.([\d.]+)/)) ? Sys.opera = s[1] :
        (s = ua.match(/version\/([\d.]+).*safari/)) ? Sys.safari = s[1] : 0;
        // if (Sys.ie) {q=encodeURIComponent(q);}//ff
        document.formsearch.action = 'http://www.url.com/e/sch/?keyboard=' + q;
        break;

    }
    document.formsearch.submit();
    return false;

}
jQuery(document).ready(function(){
	initHead();
//历史记录
// drop-down
	jQuery(".history").hover(function(){
		jQuery(this).find(".drop-box").show();
	},function(){
		jQuery(this).find(".drop-box").hide();
	});
// close-his
jQuery(".closehis").click(function(){
		jQuery(this).parents(".drop-box").hide();
});

 jQuery(".zk a").toggle(function(){
    jQuery("#player").css("width","688");
	jQuery("#cciframe").css("width","688");
	jQuery("#playlist").css("display","block");},
    function(){
    jQuery("#player").css("width","890");
	jQuery("#cciframe").css("width","890");
	jQuery("#playlist").css("display","none");}
  );

//分享到
jQuery(".share").hover(function(){
		 jQuery(".share .fxd").addClass("fxdon");
		jQuery(this).find(".bshare").show();
},function(){
	 jQuery(".share .fxd").removeClass("fxdon");
		jQuery(this).find(".bshare").hide();
});

//网盘
/*jQuery(".skydrive").hover(function(){
		jQuery(this).find("ul").show();
},function(){
		jQuery(this).find("ul").hide();
});*/
});

jQuery(document).ready(function(){
	jQuery(".menu .tmore").hover(function(){
		jQuery(this).find(".topmore").show();
	},function(){
		jQuery(this).find(".topmore").hide();
	});

	jQuery(function () {jQuery(window).scroll(function(){if (jQuery(window).scrollTop()>100){jQuery("#gotop").fadeIn(300);}else{jQuery("#gotop").fadeOut(300);}});});
	jQuery('.gtop').click(function(){
        jQuery('body,html').animate({scrollTop: '0px'}, 500);
	});
});